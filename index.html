<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadow Heist Online</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/game.css">
    <link rel="stylesheet" href="src/css/logo.css">
    <link rel="stylesheet" href="src/css/player-levels.css">
    
    <!-- Clerk Authentication -->
    <script data-clerk-publishable-key="pk_test_Z2VuZXJvdXMtcXVhZ2dhLTI4LmNsZXJrLmFjY291bnRzLmRldiQ" 
            src="https://cdn.clerk.dev/v2/clerk.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>
    
    <!-- Game Configuration -->
    <script src="src/js/config.js"></script>
</head>
<body class="dark-theme">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="logo-container">
            <div class="game-logo">
                <span class="logo-shadow">SHADOW</span>
                <span class="logo-heist">HEIST</span>
                <span class="logo-online">ONLINE</span>
            </div>
        </div>
        <div class="loading-bar-container">
            <div id="loading-progress" class="loading-progress"></div>
        </div>
        <div class="loading-info">
            <span id="loading-percentage">0%</span>
            <span id="loading-message">Initializing...</span>
        </div>
    </div>
    
    <!-- Main Game Screen -->
    <div id="main-screen" class="main-screen" style="display: none;">
        <!-- Header -->
        <header class="game-header">
            <div class="logo-small">
                <span class="logo-shadow">SH</span>
                <span class="logo-online">ONLINE</span>
            </div>
            
            <!-- Player Stats -->
            <div class="player-stats">
                <div class="player-level">
                    <span class="stat-label">LEVEL</span>
                    <span id="player-level" class="stat-value">1</span>
                </div>
                <div class="player-xp">
                    <span class="stat-label">XP</span>
                    <span id="player-xp" class="stat-value">0</span>
                </div>
                <div class="player-money">
                    <span class="stat-label">$</span>
                    <span id="player-currency" class="stat-value">500</span>
                </div>
            </div>
            
            <!-- User Menu -->
            <div class="user-menu">
                <div class="player-avatar avatar avatar-default" id="user-avatar"></div>
                <div class="dropdown-menu">
                    <ul>
                        <li id="profile-option"><i class="fas fa-user"></i> Profile</li>
                        <li id="settings-option"><i class="fas fa-cog"></i> Settings</li>
                        <li id="login-button" style="display: none;"><i class="fas fa-sign-in-alt"></i> Login</li>
                        <li id="signup-button" style="display: none;"><i class="fas fa-user-plus"></i> Signup</li>
                        <li id="logout-button"><i class="fas fa-sign-out-alt"></i> Logout</li>
                    </ul>
                </div>
            </div>
        </header>
        
        <!-- Game Content -->
        <main class="game-content">
            <!-- Map Selection Screen -->
            <div id="map-screen" class="map-screen">
                <h2 class="section-title">SELECT LOCATION</h2>
                
                <div class="map-grid">
                    <!-- Bank Heist -->
                    <div class="map-location" data-location="bank">
                        <div class="map-image bank-map-bg">
                            <div class="map-details">
                                <h3>BANK HEIST</h3>
                                <div class="map-info">
                                    <div class="difficulty">
                                        <span class="difficulty-label">DIFFICULTY:</span>
                                        <span class="difficulty-value">★★☆</span>
                                    </div>
                                    <div class="reward">
                                        <span class="reward-label">REWARD:</span>
                                        <span class="reward-value">$2,000</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mansion Infiltration -->
                    <div class="map-location" data-location="mansion">
                        <div class="map-image mansion-map-bg">
                            <div class="map-details">
                                <h3>MANSION INFILTRATION</h3>
                                <div class="map-info">
                                    <div class="difficulty">
                                        <span class="difficulty-label">DIFFICULTY:</span>
                                        <span class="difficulty-value">★★★</span>
                                    </div>
                                    <div class="reward">
                                        <span class="reward-label">REWARD:</span>
                                        <span class="reward-value">$3,500</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Casino Robbery -->
                    <div class="map-location" data-location="casino">
                        <div class="map-image casino-map-bg">
                            <div class="map-details">
                                <h3>CASINO ROBBERY</h3>
                                <div class="map-info">
                                    <div class="difficulty">
                                        <span class="difficulty-label">DIFFICULTY:</span>
                                        <span class="difficulty-value">★★★★</span>
                                    </div>
                                    <div class="reward">
                                        <span class="reward-label">REWARD:</span>
                                        <span class="reward-value">$5,000</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Research Lab -->
                    <div class="map-location" data-location="lab">
                        <div class="map-image lab-map-bg">
                            <div class="map-details">
                                <h3>RESEARCH LAB</h3>
                                <div class="map-info">
                                    <div class="difficulty">
                                        <span class="difficulty-label">DIFFICULTY:</span>
                                        <span class="difficulty-value">★★★★★</span>
                                    </div>
                                    <div class="reward">
                                        <span class="reward-label">REWARD:</span>
                                        <span class="reward-value">$8,000</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Location Screens (Initially Hidden) -->
            <div id="bank-screen" class="location-screen" style="display: none;">
                <h2 class="section-title">BANK HEIST</h2>
                <button class="back-button" data-target="map"><i class="fas fa-arrow-left"></i> Back to Map</button>
                
                <div class="location-content">
                    <div class="location-description">
                        <p>Plan and execute a heist on the National Reserve Bank. Navigate security systems, avoid guards, and crack the vault.</p>
                    </div>
                    
                    <div class="mission-objectives">
                        <h3>OBJECTIVES</h3>
                        <ul>
                            <li>Disable security cameras</li>
                            <li>Distract or neutralize guards</li>
                            <li>Crack the vault code</li>
                            <li>Secure the valuables</li>
                            <li>Escape undetected</li>
                        </ul>
                    </div>
                    
                    <button class="start-mission-button">START MISSION</button>
                </div>
            </div>
            
            <div id="mansion-screen" class="location-screen" style="display: none;">
                <h2 class="section-title">MANSION INFILTRATION</h2>
                <button class="back-button" data-target="map"><i class="fas fa-arrow-left"></i> Back to Map</button>
                
                <div class="location-content">
                    <div class="location-description">
                        <p>Infiltrate the heavily guarded mansion of a corrupt billionaire to retrieve sensitive documents.</p>
                    </div>
                    
                    <div class="mission-objectives">
                        <h3>OBJECTIVES</h3>
                        <ul>
                            <li>Enter the mansion undetected</li>
                            <li>Find the hidden safe room</li>
                            <li>Bypass biometric security</li>
                            <li>Retrieve the documents</li>
                            <li>Exit without raising alarms</li>
                        </ul>
                    </div>
                    
                    <button class="start-mission-button">START MISSION</button>
                </div>
            </div>
            
            <div id="casino-screen" class="location-screen" style="display: none;">
                <h2 class="section-title">CASINO ROBBERY</h2>
                <button class="back-button" data-target="map"><i class="fas fa-arrow-left"></i> Back to Map</button>
                
                <div class="location-content">
                    <div class="location-description">
                        <p>Pull off the ultimate casino heist by outsmarting security systems and escaping with millions.</p>
                    </div>
                    
                    <div class="mission-objectives">
                        <h3>OBJECTIVES</h3>
                        <ul>
                            <li>Manipulate the surveillance system</li>
                            <li>Gain access to the counting room</li>
                            <li>Crack the advanced safe</li>
                            <li>Collect the money without triggering alarms</li>
                            <li>Escape through the underground tunnel</li>
                        </ul>
                    </div>
                    
                    <button class="start-mission-button">START MISSION</button>
                </div>
            </div>
            
            <div id="lab-screen" class="location-screen" style="display: none;">
                <h2 class="section-title">RESEARCH LAB</h2>
                <button class="back-button" data-target="map"><i class="fas fa-arrow-left"></i> Back to Map</button>
                
                <div class="location-content">
                    <div class="location-description">
                        <p>Infiltrate a high-security research facility to steal experimental technology and scientific data.</p>
                    </div>
                    
                    <div class="mission-objectives">
                        <h3>OBJECTIVES</h3>
                        <ul>
                            <li>Bypass advanced security systems</li>
                            <li>Navigate through laser grids</li>
                            <li>Hack the central computer</li>
                            <li>Retrieve the prototype</li>
                            <li>Escape before lockdown</li>
                        </ul>
                    </div>
                    
                    <button class="start-mission-button">START MISSION</button>
                </div>
            </div>
            
            <!-- Profile Screen -->
            <div id="profile-screen" class="profile-screen" style="display: none;">
                <h2 class="section-title">AGENT PROFILE</h2>
                <button class="back-button" data-target="map"><i class="fas fa-arrow-left"></i> Back to Map</button>
                
                <div class="profile-content">
                    <div class="profile-header">
                        <div class="profile-avatar-section">
                            <div class="player-avatar avatar avatar-default" id="profile-avatar"></div>
                            <h3 id="profile-name">Agent</h3>
                        </div>
                        
                        <div class="profile-stats">
                            <div class="stat-box">
                                <span class="stat-title">LEVEL</span>
                                <span id="profile-level" class="stat-number">1</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-title">XP</span>
                                <span id="profile-xp" class="stat-number">0</span>
                            </div>
                            <div class="stat-box">
                                <span class="stat-title">FUNDS</span>
                                <span id="profile-currency" class="stat-number">$500</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-section">
                        <h3>AVATAR SELECTION</h3>
                        <div class="avatar-selection">
                            <div class="avatar-option selected" data-avatar="default">
                                <div class="avatar avatar-default"></div>
                            </div>
                            <div class="avatar-option" data-avatar="1">
                                <div class="avatar avatar-1"></div>
                            </div>
                            <div class="avatar-option" data-avatar="2">
                                <div class="avatar avatar-2"></div>
                            </div>
                            <div class="avatar-option" data-avatar="3">
                                <div class="avatar avatar-3"></div>
                            </div>
                            <div class="avatar-option" data-avatar="4">
                                <div class="avatar avatar-4"></div>
                            </div>
                            <div class="avatar-option" data-avatar="5">
                                <div class="avatar avatar-5"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-section">
                        <h3>SKILLS</h3>
                        <div class="skills-grid">
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fas fa-key"></i></div>
                                <div class="skill-details">
                                    <h4>LOCKPICKING</h4>
                                    <div class="skill-level">
                                        <div class="skill-progress-bar">
                                            <div class="skill-progress" style="width: 20%"></div>
                                        </div>
                                        <span id="lockpicking-level">Lv.1</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fas fa-laptop-code"></i></div>
                                <div class="skill-details">
                                    <h4>HACKING</h4>
                                    <div class="skill-level">
                                        <div class="skill-progress-bar">
                                            <div class="skill-progress" style="width: 20%"></div>
                                        </div>
                                        <span id="hacking-level">Lv.1</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fas fa-user-ninja"></i></div>
                                <div class="skill-details">
                                    <h4>STEALTH</h4>
                                    <div class="skill-level">
                                        <div class="skill-progress-bar">
                                            <div class="skill-progress" style="width: 20%"></div>
                                        </div>
                                        <span id="stealth-level">Lv.1</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fas fa-fist-raised"></i></div>
                                <div class="skill-details">
                                    <h4>COMBAT</h4>
                                    <div class="skill-level">
                                        <div class="skill-progress-bar">
                                            <div class="skill-progress" style="width: 20%"></div>
                                        </div>
                                        <span id="combat-level">Lv.1</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-section">
                        <h3>STATISTICS</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Heists Completed</span>
                                <span id="stats-heists" class="stat-value">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Wins</span>
                                <span id="stats-wins" class="stat-value">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Losses</span>
                                <span id="stats-losses" class="stat-value">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Items Collected</span>
                                <span id="stats-items" class="stat-value">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Screen -->
            <div id="settings-screen" class="settings-screen" style="display: none;">
                <h2 class="section-title">SETTINGS</h2>
                <button class="back-button" data-target="map"><i class="fas fa-arrow-left"></i> Back to Map</button>
                
                <div class="settings-content">
                    <div class="settings-section">
                        <h3>GAME SETTINGS</h3>
                        
                        <div class="setting-item">
                            <span class="setting-label">Sound Effects</span>
                            <label class="toggle">
                                <input type="checkbox" id="sound-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <span class="setting-label">Music</span>
                            <label class="toggle">
                                <input type="checkbox" id="music-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <span class="setting-label">Dark Theme</span>
                            <label class="toggle">
                                <input type="checkbox" id="theme-toggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>ACCOUNT SETTINGS</h3>
                        
                        <div class="setting-item">
                            <span class="setting-label">Connected Account</span>
                            <span id="account-email" class="setting-value">user@example.com</span>
                        </div>
                        
                        <button id="change-password-btn" class="settings-button">Change Password</button>
                        <button id="delete-account-btn" class="settings-button danger-button">Delete Account</button>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="game-footer">
            <div class="footer-links">
                <a href="#" class="footer-link">About</a>
                <a href="#" class="footer-link">Privacy</a>
                <a href="#" class="footer-link">Terms</a>
                <a href="#" class="footer-link">Contact</a>
            </div>
            <div class="copyright">
                © 2024 Shadow Heist Online. All rights reserved.
            </div>
        </footer>
    </div>
    
    <!-- Game Scripts -->
    <script src="src/js/firebase-service.js"></script>
    <script src="src/js/auth.js"></script>
    <script src="src/js/game.js"></script>
    
    <script>
        // Handle user menu dropdown
        document.addEventListener('DOMContentLoaded', function() {
            const userAvatar = document.getElementById('user-avatar');
            const dropdownMenu = document.querySelector('.dropdown-menu');
            
            if (userAvatar && dropdownMenu) {
                userAvatar.addEventListener('click', function() {
                    dropdownMenu.classList.toggle('active');
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', function(event) {
                    if (!event.target.closest('.user-menu')) {
                        dropdownMenu.classList.remove('active');
                    }
                });
            }
            
            // Handle menu options
            const profileOption = document.getElementById('profile-option');
            const settingsOption = document.getElementById('settings-option');
            const logoutButton = document.getElementById('logout-button');
            const loginButton = document.getElementById('login-button');
            const signupButton = document.getElementById('signup-button');
            
            if (profileOption) {
                profileOption.addEventListener('click', function() {
                    showScreen('profile-screen');
                });
            }
            
            if (settingsOption) {
                settingsOption.addEventListener('click', function() {
                    showScreen('settings-screen');
                });
            }
            
            if (logoutButton) {
                logoutButton.addEventListener('click', function() {
                    if (window.Clerk) {
                        window.Clerk.signOut();
                    } else if (firebase) {
                        firebase.auth().signOut();
                    }
                });
            }
            
            if (loginButton) {
                loginButton.addEventListener('click', function() {
                    if (window.Clerk) {
                        window.Clerk.openSignIn();
                    }
                });
            }
            
            if (signupButton) {
                signupButton.addEventListener('click', function() {
                    if (window.Clerk) {
                        window.Clerk.openSignUp();
                    }
                });
            }
            
            // Back buttons
            const backButtons = document.querySelectorAll('.back-button');
            backButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const target = this.getAttribute('data-target');
                    if (target) {
                        showScreen(target + '-screen');
                    }
                });
            });
            
            // Function to show a specific screen
            function showScreen(screenId) {
                const screens = document.querySelectorAll('.map-screen, .location-screen, .profile-screen, .settings-screen');
                screens.forEach(screen => {
                    screen.style.display = 'none';
                });
                
                const targetScreen = document.getElementById(screenId);
                if (targetScreen) {
                    targetScreen.style.display = 'block';
                }
            }
            
            // Update login/logout buttons based on auth status
            function updateAuthButtons() {
                const isLoggedIn = (window.Clerk && window.Clerk.user) || (firebase && firebase.auth().currentUser);
                
                if (loginButton) loginButton.style.display = isLoggedIn ? 'none' : 'block';
                if (signupButton) signupButton.style.display = isLoggedIn ? 'none' : 'block';
                if (logoutButton) logoutButton.style.display = isLoggedIn ? 'block' : 'none';
                if (profileOption) profileOption.style.display = isLoggedIn ? 'block' : 'none';
            }
            
            // Check auth status when loaded
            if (window.Clerk) {
                window.Clerk.addListener(updateAuthButtons);
            } else if (firebase) {
                firebase.auth().onAuthStateChanged(updateAuthButtons);
            }
            
            // Initial check
            setTimeout(updateAuthButtons, 1000);
        });
    </script>
</body>
</html> 