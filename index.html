<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadow Heist Online</title>
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/logo.css">
    <link rel="stylesheet" href="src/css/player-levels.css">
    <link rel="stylesheet" href="src/css/game.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <!-- Clerk SDK -->
    <script
        async
        crossorigin="anonymous"
        data-clerk-publishable-key="pk_test_Z2VuZXJvdXMtcXVhZ2dhLTI4LmNsZXJrLmFjY291bnRzLmRldiQ"
        src="https://generous-quagga-28.clerk.accounts.dev/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
        type="text/javascript">
    </script>
</head>
<body class="game-body">
    <div class="loading-screen">
        <div class="logo-container">
            <img src="src/images/logo.png" alt="Shadow Heist Logo" class="logo logo-large logo-animated">
        </div>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
        <div class="loading-text">Loading game assets... <span class="loading-percentage">0%</span></div>
    </div>

    <header class="game-header">
        <div class="header-left">
            <div class="logo-container">
                <img src="src/images/logo.png" alt="Shadow Heist Logo" class="logo">
            </div>
            <h1 class="game-title">Shadow Heist</h1>
        </div>
        <nav class="main-nav">
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-page="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="#" class="nav-link" data-page="play"><i class="fas fa-play"></i> Play</a></li>
                <li><a href="#" class="nav-link" data-page="leaderboard"><i class="fas fa-trophy"></i> Leaderboard</a></li>
                <li><a href="profile.html" class="nav-link"><i class="fas fa-user"></i> Profile</a></li>
            </ul>
        </nav>
        <div class="header-right">
            <div class="player-info">
                <div class="player-level">
                    <div class="level-badge">
                        <span class="level-number">1</span>
                    </div>
                </div>
                <div class="player-details">
                    <span class="player-name">Loading...</span>
                    <div class="xp-bar">
                        <div class="xp-fill"></div>
                        <span class="xp-text">0/100 XP</span>
                    </div>
                </div>
                <div class="player-avatar">
                    <img src="src/images/avatars/avatar1.png" alt="Player Avatar" id="player-avatar-img">
                </div>
            </div>
            <button class="theme-toggle"><i class="fas fa-moon"></i></button>
            <button class="notifications-toggle">
                <i class="fas fa-bell"></i>
                <span class="notification-badge">0</span>
            </button>
            <div class="user-dropdown">
                <button class="dropdown-toggle">
                    <i class="fas fa-user-circle"></i>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <div class="dropdown-menu">
                    <a href="profile.html" class="dropdown-item"><i class="fas fa-user"></i> Profile</a>
                    <a href="#" class="dropdown-item"><i class="fas fa-cog"></i> Settings</a>
                    <a href="#" class="dropdown-item" id="login-button"><i class="fas fa-sign-in-alt"></i> Login</a>
                    <a href="#" class="dropdown-item" id="signup-button"><i class="fas fa-user-plus"></i> Register</a>
                    <a href="#" class="dropdown-item" id="logout-button"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </div>
    </header>

    <main class="game-content">
        <section class="page-content active" id="dashboard-page">
            <div class="dashboard-grid">
                <div class="dashboard-card welcome-card">
                    <div class="card-header">
                        <h2>Welcome back, <span id="player-name-display">Agent</span>!</h2>
                    </div>
                    <div class="card-body">
                        <p>Ready for your next heist? Select a mission below or join other players online.</p>
                        <div class="quick-actions">
                            <button class="button primary-button" id="quick-play-button">
                                <i class="fas fa-play"></i> Quick Play
                            </button>
                            <button class="button secondary-button" id="tutorial-button">
                                <i class="fas fa-book"></i> Tutorial
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-card stats-card">
                    <div class="card-header">
                        <h2>Your Stats</h2>
                    </div>
                    <div class="card-body">
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-icon"><i class="fas fa-gamepad"></i></div>
                                <div class="stat-value" id="games-played">0</div>
                                <div class="stat-label">Games Played</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon"><i class="fas fa-trophy"></i></div>
                                <div class="stat-value" id="games-won">0</div>
                                <div class="stat-label">Victories</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon"><i class="fas fa-skull"></i></div>
                                <div class="stat-value" id="kill-count">0</div>
                                <div class="stat-label">Eliminations</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-icon"><i class="fas fa-briefcase"></i></div>
                                <div class="stat-value" id="heists-completed">0</div>
                                <div class="stat-label">Heists</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-card achievements-card">
                    <div class="card-header">
                        <h2>Recent Achievements</h2>
                    </div>
                    <div class="card-body">
                        <div class="achievements-list" id="achievements-list">
                            <div class="achievement-placeholder">
                                <div class="placeholder-icon"><i class="fas fa-medal"></i></div>
                                <div class="placeholder-text">Complete missions to earn achievements</div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <a href="#" class="view-all">View All Achievements</a>
                    </div>
                </div>
                
                <div class="dashboard-card news-card">
                    <div class="card-header">
                        <h2>Game Updates</h2>
                    </div>
                    <div class="card-body">
                        <div class="news-item">
                            <div class="news-date">Apr 1, 2025</div>
                            <h3 class="news-title">New Role: The Mastermind</h3>
                            <p class="news-summary">Take control of the entire operation with the new Mastermind role! Plan strategies, place traps, and manipulate the game environment.</p>
                        </div>
                        <div class="news-item">
                            <div class="news-date">Mar 15, 2025</div>
                            <h3 class="news-title">Season 2: Digital Underground</h3>
                            <p class="news-summary">The new season brings fresh challenges, rewards, and a completely new map: The Quantum Vault!</p>
                        </div>
                    </div>
                    <div class="card-footer">
                        <a href="#" class="view-all">Read More Updates</a>
                    </div>
                </div>
                
                <div class="dashboard-card friends-card">
                    <div class="card-header">
                        <h2>Online Friends</h2>
                        <button class="add-friend-button"><i class="fas fa-user-plus"></i></button>
                    </div>
                    <div class="card-body">
                        <div class="friends-list" id="friends-list">
                            <div class="friend-placeholder">
                                <div class="placeholder-icon"><i class="fas fa-user-friends"></i></div>
                                <div class="placeholder-text">Add friends to see who's online</div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <a href="#" class="view-all">Manage Friends</a>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="page-content" id="play-page">
            <div class="play-options">
                <div class="game-mode-selection">
                    <h2>Select Game Mode</h2>
                    <div class="mode-cards">
                        <div class="mode-card" data-mode="classic">
                            <div class="mode-icon"><i class="fas fa-mask"></i></div>
                            <h3>Classic Heist</h3>
                            <p>The original gameplay experience. Infiltrate, steal, escape!</p>
                            <span class="player-count">8-12 players</span>
                            <button class="button primary-button">Play</button>
                        </div>
                        <div class="mode-card" data-mode="special">
                            <div class="mode-icon"><i class="fas fa-bolt"></i></div>
                            <h3>Speed Run</h3>
                            <p>Fast-paced version with limited time and higher stakes!</p>
                            <span class="player-count">6-8 players</span>
                            <button class="button primary-button">Play</button>
                        </div>
                        <div class="mode-card premium" data-mode="premium">
                            <div class="mode-icon"><i class="fas fa-crown"></i></div>
                            <h3>Elite Operation</h3>
                            <p>Strategic gameplay with specialized roles and objectives.</p>
                            <span class="player-count">10-16 players</span>
                            <button class="button premium-button">Premium</button>
                        </div>
                        <div class="mode-card new" data-mode="custom">
                            <div class="mode-icon"><i class="fas fa-cogs"></i></div>
                            <h3>Custom Game</h3>
                            <p>Create your own rules and invite friends to play!</p>
                            <span class="player-count">4-16 players</span>
                            <button class="button secondary-button">Create</button>
                        </div>
                    </div>
                </div>
                <div class="map-selection">
                    <h2>Select Map</h2>
                    <div class="map-carousel">
                        <button class="carousel-arrow prev"><i class="fas fa-chevron-left"></i></button>
                        <div class="map-cards">
                            <div class="map-card active" data-map="bank">
                                <img src="public/assets/images/maps/bank.jpg" alt="Bank Vault Map">
                                <div class="map-info">
                                    <h3>Federal Reserve</h3>
                                    <p>The classic bank vault heist with multiple security layers.</p>
                                </div>
                            </div>
                            <div class="map-card" data-map="mansion">
                                <img src="public/assets/images/maps/mansion.jpg" alt="Billionaire's Mansion">
                                <div class="map-info">
                                    <h3>Billionaire's Mansion</h3>
                                    <p>Infiltrate a high-tech mansion with advanced security systems.</p>
                                </div>
                            </div>
                            <div class="map-card" data-map="casino">
                                <img src="public/assets/images/maps/casino.jpg" alt="Neon Casino">
                                <div class="map-info">
                                    <h3>Neon Casino</h3>
                                    <p>Navigate through a bustling casino to reach the underground vault.</p>
                                </div>
                            </div>
                            <div class="map-card locked" data-map="lab">
                                <img src="public/assets/images/maps/lab.jpg" alt="Quantum Lab">
                                <div class="map-info">
                                    <h3>Quantum Lab</h3>
                                    <p>Unlock by reaching Level 15 or purchase premium pass.</p>
                                    <div class="map-lock"><i class="fas fa-lock"></i></div>
                                </div>
                            </div>
                        </div>
                        <button class="carousel-arrow next"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
                
                <div class="game-options-card">
                    <h2>Game Options</h2>
                    <div class="options-form">
                        <div class="option-group">
                            <label>Difficulty</label>
                            <div class="difficulty-selector">
                                <button class="difficulty-option active" data-difficulty="easy">Easy</button>
                                <button class="difficulty-option" data-difficulty="normal">Normal</button>
                                <button class="difficulty-option" data-difficulty="hard">Hard</button>
                            </div>
                        </div>
                        <div class="option-group">
                            <label>Match Type</label>
                            <div class="toggle-option">
                                <button class="toggle-button active" data-match="public">Public</button>
                                <button class="toggle-button" data-match="private">Private</button>
                            </div>
                        </div>
                        <div class="option-group hidden" id="private-code-group">
                            <label>Private Code</label>
                            <div class="private-code-container">
                                <input type="text" id="private-code" placeholder="Enter a code for your private match">
                                <button class="generate-code-button"><i class="fas fa-dice"></i></button>
                            </div>
                        </div>
                    </div>
                    <div class="start-game-container">
                        <button class="button primary-button large-button start-game-button">
                            <i class="fas fa-play"></i> Start Game
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <section class="page-content" id="leaderboard-page">
            <div class="leaderboard-container">
                <div class="leaderboard-header">
                    <h2>Global Leaderboard</h2>
                    <div class="leaderboard-filters">
                        <div class="filter-group">
                            <label>Season:</label>
                            <select id="season-filter">
                                <option value="current">Current (S2)</option>
                                <option value="s1">Season 1</option>
                                <option value="all">All Time</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Category:</label>
                            <select id="category-filter">
                                <option value="xp">XP / Level</option>
                                <option value="wins">Wins</option>
                                <option value="kd">K/D Ratio</option>
                                <option value="heists">Heists Completed</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="leaderboard-top">
                    <div class="top-player second-place">
                        <div class="player-rank">2</div>
                        <div class="player-avatar">
                            <img src="public/assets/avatars/avatar5.png" alt="Second Place">
                        </div>
                        <div class="player-info">
                            <div class="player-name">CyberNinja</div>
                            <div class="player-level">
                                <div class="level-badge small">
                                    <span class="level-number">42</span>
                                </div>
                            </div>
                        </div>
                        <div class="player-score">28,945 XP</div>
                    </div>
                    
                    <div class="top-player first-place">
                        <div class="player-rank">1</div>
                        <div class="player-crown">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="player-avatar">
                            <img src="public/assets/avatars/avatar12.png" alt="First Place">
                        </div>
                        <div class="player-info">
                            <div class="player-name">ShadowMaster</div>
                            <div class="player-level">
                                <div class="level-badge small">
                                    <span class="level-number">50</span>
                                </div>
                            </div>
                        </div>
                        <div class="player-score">35,780 XP</div>
                    </div>
                    
                    <div class="top-player third-place">
                        <div class="player-rank">3</div>
                        <div class="player-avatar">
                            <img src="public/assets/avatars/avatar8.png" alt="Third Place">
                        </div>
                        <div class="player-info">
                            <div class="player-name">StealthHacker</div>
                            <div class="player-level">
                                <div class="level-badge small">
                                    <span class="level-number">38</span>
                                </div>
                            </div>
                        </div>
                        <div class="player-score">24,321 XP</div>
                    </div>
                </div>
                
                <div class="leaderboard-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Level</th>
                                <th>Score</th>
                                <th>Wins</th>
                                <th>K/D</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboard-body">
                            <!-- Ranks 4-10 will be populated by JS -->
                            <tr>
                                <td>4</td>
                                <td class="player-cell">
                                    <img src="public/assets/avatars/avatar3.png" alt="Player Avatar" class="small-avatar">
                                    <span>VaultBreaker</span>
                                </td>
                                <td>
                                    <div class="level-badge extra-small">
                                        <span class="level-number">35</span>
                                    </div>
                                </td>
                                <td>22,105 XP</td>
                                <td>149</td>
                                <td>3.2</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td class="player-cell">
                                    <img src="public/assets/avatars/avatar7.png" alt="Player Avatar" class="small-avatar">
                                    <span>PhantomThief</span>
                                </td>
                                <td>
                                    <div class="level-badge extra-small">
                                        <span class="level-number">31</span>
                                    </div>
                                </td>
                                <td>19,874 XP</td>
                                <td>128</td>
                                <td>2.8</td>
                            </tr>
                            <tr class="your-rank">
                                <td>?</td>
                                <td class="player-cell">
                                    <img id="your-rank-avatar" src="public/assets/avatars/avatar1.png" alt="Your Avatar" class="small-avatar">
                                    <span id="your-rank-name">You</span>
                                </td>
                                <td>
                                    <div class="level-badge extra-small">
                                        <span class="level-number" id="your-rank-level">1</span>
                                    </div>
                                </td>
                                <td id="your-rank-score">0 XP</td>
                                <td id="your-rank-wins">0</td>
                                <td id="your-rank-kd">0</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <div id="notification-container" class="notification-container"></div>
    <div id="auth-error" class="auth-error"></div>

    <div class="modal" id="loading-game-modal">
        <div class="modal-content">
            <div class="loading-game">
                <h2>Preparing Your Heist</h2>
                <div class="loading-animation">
                    <i class="fas fa-circle-notch fa-spin"></i>
                </div>
                <div class="loading-text">Connecting to secure server...</div>
                <div class="loading-tips">
                    <h3>Heist Tip:</h3>
                    <p id="loading-tip">The Hacker role can disable security systems temporarily, allowing the team to move through restricted areas undetected.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Script Files -->
    <script src="src/js/config.js"></script>
    <script src="src/js/firebase-service.js"></script>
    <script src="src/js/auth.js"></script>
    <script src="src/js/game.js"></script>
    <script src="src/js/dashboard.js"></script>
    
    <!-- Auth Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Firebase service first
            if (window.FirebaseService) {
                FirebaseService.init();
            }
            
            // Initialize login/signup buttons
            const loginButton = document.getElementById('login-button');
            const signupButton = document.getElementById('signup-button');
            const logoutButton = document.getElementById('logout-button');
            
            if (loginButton) {
                loginButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (window.Clerk) {
                        window.Clerk.openSignIn();
                    }
                });
            }
            
            if (signupButton) {
                signupButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (window.Clerk) {
                        window.Clerk.openSignUp();
                    }
                });
            }
            
            // Update UI based on auth state
            function updateAuthUI(isLoggedIn) {
                if (loginButton) loginButton.style.display = isLoggedIn ? 'none' : 'block';
                if (signupButton) signupButton.style.display = isLoggedIn ? 'none' : 'block';
                if (logoutButton) logoutButton.style.display = isLoggedIn ? 'block' : 'none';
            }
            
            // Listen for auth state changes
            document.addEventListener('auth-initialized', (e) => {
                const isLoggedIn = e.detail?.user || window.Clerk?.user;
                updateAuthUI(!!isLoggedIn);
            });
            
            // Check initial state
            updateAuthUI(!!window.Clerk?.user);
        });
    </script>
</body>
</html> 